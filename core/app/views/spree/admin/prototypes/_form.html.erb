<div data-hook="admin_prototype_form_fields" class="row">
  <div class="alpha four columns">
    <%= f.field_container :name do %>
      <%= f.label :name, t(:name) %>
      <%= f.text_field :name, :class => 'fullwidth' %>
      <%= f.error_message_on :name %>
    <% end %>
  </div>

  <div class="six columns">
    <div class="field">
      <label><%= t(:properties) %></label>

      <ul class='checkbox-list' id='properties' data-hook>
      <% Spree::Property.sorted.each do |property| %>
        <% selected = if @prototype.new_record?
          (params[:property] and params[:property][:id] and params[:property][:id].include?(property.id.to_s))
        else
          @prototype.properties.include?(property)
        end %>
        <li>
          <label>
            <%= check_box_tag 'property[id][]', "#{property.id}", selected %>
            <%= property.name %>
          </label>
        </li>
      <% end %>
      </ul>  
    </div>
  </div>

  <div class="six columns omega">
    <div class="field">
      <label><%= t(:option_types) %></label>

      <ul class="checkbox-list" id="option_types" data-hook>
      <% Spree::OptionType.all.each do |option_type| %>
        <% selected = if @prototype.new_record?
          (params[:option_type] and params[:option_type][:id] and params[:option_type][:id].include?(option_type.id.to_s))
        else
          @prototype.option_types.include?(option_type)
        end %>
        <li>
          <label>
            <%= check_box_tag 'option_type[id][]', "#{option_type.id}", selected %>
            <%= option_type.name %>
          </label>
        </li>
      <% end %>
      </ul>
    </div>
  </div>
</div>